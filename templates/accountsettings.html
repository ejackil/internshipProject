{% extends "layout.html" %}
{% block title %}Account Settings{% endblock %}
    
{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/accountsettings.css') }}">
{% endblock %}

{% block content %}
<div class="sidebar">
    <a href="#account-details">Account Details</a>
    <a href="#preferences">Preferences</a>
    <a href="#privacy">Privacy Settings</a>
</div>
<div id="settings">
<div id="account-details" class="section">
    <h2>Change Account Details</h2>
    <form id="details-form" action="/accountsettings" method="POST">
        <label for="email-change">Change Email:</label>
        <br>
        <input value="{{ Email }}" id="email-change" type="email" name="email-change">

        <br>

        <label for="password-change">Change Password:</label>
        <br>
        <input id="password-change" type="password" name="password-change">
        <br>
        <label for="confirm-password-change">Confirm Password:</label>
        <br>
        <input id="confirm-password-change" type="password" name="confirm-password-change">

        <br>

        <label for="phone-number-change">Change your Phone Number:</label>
        <br>
        <input id="phone-number-change" type="text" name="phone-number-change">
<!-- TODO flash message -->
        <br>
        <p id="password-error" hidden>*Your passwords don't match</p>
        <input type="submit" value="Submit">

        <script>
            const input_password = document.getElementById("password-change");
            const check_password = document.getElementById("confirm-password-change");
            const password_submit = document.getElementById("details-form");
            const error_message = document.getElementById("password-error");
   
           password_submit.addEventListener("submit", (e) => {
               if (input_password.value !== check_password.value) {
                       e.preventDefault();
                       error_message.hidden = false;
                   }
           });
   
       </script>
    </form>
</div>
<div id="preferences" class="section">
    <h2>Change Preferences</h2>
    <form action="/accountsettings" method="POST">
        <label for="marketing-emails">Recieve Marketing Emails</label>
        <input type="checkbox" id="marketing-emails" name="marketing-emails" value="marketing-emails">
        <br>
        <label for="event-emails">Recieve Event Emails</label>
        <input type="checkbox" id="event-emails" name="event-emails" value="event-emails">
        <br>
        <label for="deal-emails">Recieve Deals Emails</label>
        <input type="checkbox" id="deal-emails" name="deal-emails" value="deal-emails">
        <br>
        <label for="reward-emails">Recieve Customer Rewards Emails</label>
        <input type="checkbox" id="reward-emails" name="reward-emails" value="reward-emails">
        <br>
        <input type="submit" value="Submit">
    </form>
</div>
<div id="privacy" class="section">
    <h2>Change Privacy Settings</h2>
    <form action="/accountsettings" method="POST">
        <!-- <label for="payment-info">Save Payment Information</label>
        <input type="checkbox" id="payment-info" name="payment-info" value="payment-info" checked>
        <input type="submit" id="delete-account" value="Submit"> -->
    </form>
    <form action="/accountsettings" method="POST">
        <label for="delete-account">Delete Account
            <p>(This is irreversible)</p>
        </label>
        <input type="submit" id="delete-account" value="Submit">
    </form>
</div>
</div>
{% endblock %}
