{% extends "layout.html" %}
{% block title %}Account Settings{% endblock %}
    
{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/accountsettings.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

{% endblock %}

{% block content %}
<div class="sidebar">
    <a href="#account-details" class="active"><i class="fas fa-user icon"></i> Account Details</a>
    <a href="#preferences"><i class="fas fa-cog icon"></i> Preferences</a>
    <a href="#privacy"><i class="fas fa-lock icon"></i> Privacy Settings</a>
    <a href="#support"><i class="fas fa-headset icon"></i> Support and Feedback</a>
    <a href="#del-account"><i class="fas fa-trash icon"></i> Delete Account</a>
</div>

<div id="settings">
    <div id="account-details" class="section">
        <h2>Change Account Details</h2>
        <form id="details-form" action="/accountsettings" method="POST">
            <label for="email-change">Change Email:</label>
            <br>
            <input value="{{ Email }}" id="email-change" type="email" name="email-change">
            <br>

            <label for="password-change">Change Password:</label>
            <br>
            <input id="password-change" type="password" name="password-change">
            <br>
            <label for="confirm-password-change">Confirm Password:</label>
            <br>
            <input id="confirm-password-change" type="password" name="confirm-password-change">
            <br>

            <label for="phone-number-change">Change your Phone Number:</label>
            <br>
            <input id="phone-number-change" type="text" name="phone-number-change">
            <br>

            <p id="password-error" hidden>*Your passwords don't match</p>
            <input type="submit" value="Submit">
        </form>
        <script>
            const input_password = document.getElementById("password-change");
            const check_password = document.getElementById("confirm-password-change");
            const password_submit = document.getElementById("details-form");
            const error_message = document.getElementById("password-error");

            password_submit.addEventListener("submit", (e) => {
                if (input_password.value !== check_password.value) {
                    e.preventDefault();
                    error_message.hidden = false;
                }
            });
        </script>
    </div>

    <div id="preferences" class="section">
        <h2>Change Preferences</h2>
        <form id="preferences-form" action="/accountsettings" method="POST">
            <label for="marketing-emails">Receive Marketing Emails</label>
            <input type="checkbox" id="marketing-emails" name="marketing-emails" value="marketing-emails">
            <br>
            <label for="event-emails">Receive Event Emails</label>
            <input type="checkbox" id="event-emails" name="event-emails" value="event-emails">
            <br>
            <label for="deal-emails">Receive Deals Emails</label>
            <input type="checkbox" id="deal-emails" name="deal-emails" value="deal-emails">
            <br>
            <label for="reward-emails">Receive Customer Rewards Emails</label>
            <input type="checkbox" id="reward-emails" name="reward-emails" value="reward-emails">
            <br>
            <input type="submit" value="Submit">
        </form>
    </div>

    <div id="support" class="section">
        <h2>Support and Feedback</h2>
        <form id="support-form" action="/accountsettings" method="POST">
            <label for="email-feedback">Please enter your email:</label>
            <textarea id="email-feedback" name="email-feedback" rows="1" cols="50" placeholder="Please enter email here..."></textarea>
            <br>
            <label for="support-message">Please enter your feedback:</label>
            <textarea id="support-message" name="support-message" rows="4" cols="50" placeholder="Please enter feedback here..."></textarea>
            <br>
            <input type="submit" value="Submit">
        </form>
    </div>

    <div id="del-account" class="section">
        <h2>Delete Account</h2>
        <form id="delete-account-form" action="/accountsettings" method="POST">
            <label for="delete-account">Delete Account
                <p>(This is irreversible)</p>
            </label>
            <input type="submit" id="delete-account" name="delete-account" value="Submit">
        </form>
    </div>
</div>

{% endblock %}
